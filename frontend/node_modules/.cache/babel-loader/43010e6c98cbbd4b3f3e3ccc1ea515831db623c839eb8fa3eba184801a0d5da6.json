{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\lab\\\\frontend\\\\src\\\\components\\\\QRScanner.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport axios from 'axios';\nimport jsQR from 'jsqr';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst QRScanner = () => {\n  _s();\n  const [scanResult, setScanResult] = useState(null);\n  const [scanError, setScanError] = useState(null);\n  const [manualId, setManualId] = useState('');\n  const [labName, setLabName] = useState('Main Lab');\n  const [isScanning, setIsScanning] = useState(false);\n  const [cameraError, setCameraError] = useState('');\n  const [lastScanned, setLastScanned] = useState('');\n  const [showSuccessPopup, setShowSuccessPopup] = useState(false);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const streamRef = useRef(null);\n  const scanIntervalRef = useRef(null);\n  const audioRef = useRef(null);\n  useEffect(() => {\n    audioRef.current = new Audio();\n    audioRef.current.src = \"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==\";\n    return () => {\n      stopCameraScan();\n    };\n  }, []);\n  const playScanSound = () => {\n    try {\n      if (audioRef.current) {\n        audioRef.current.play().catch(e => console.log('Audio play failed:', e));\n      }\n    } catch (error) {\n      console.log('Sound error:', error);\n    }\n  };\n  const showSuccessMessage = () => {\n    setShowSuccessPopup(true);\n    setTimeout(() => {\n      setShowSuccessPopup(false);\n    }, 3000);\n  };\n  const startCameraScan = async () => {\n    try {\n      setCameraError('');\n      setScanError('');\n      setScanResult(null);\n      setIsScanning(true);\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: \"environment\",\n          width: {\n            ideal: 1280\n          },\n          height: {\n            ideal: 720\n          }\n        }\n      });\n      streamRef.current = stream;\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        videoRef.current.setAttribute(\"playsinline\", true);\n        videoRef.current.onloadedmetadata = () => {\n          videoRef.current.play().then(() => {\n            startQRDetection();\n          });\n        };\n      }\n    } catch (error) {\n      console.error('Camera error:', error);\n      setCameraError(`Camera Error: ${error.message}`);\n      setIsScanning(false);\n    }\n  };\n  const startQRDetection = () => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    const scanQR = () => {\n      if (video.readyState === video.HAVE_ENOUGH_DATA) {\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\n        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n        const code = jsQR(imageData.data, imageData.width, imageData.height);\n        if (code) {\n          console.log('QR Code detected:', code.data);\n          handleScan(code.data);\n        }\n      }\n    };\n    scanIntervalRef.current = setInterval(scanQR, 500);\n  };\n  const stopCameraScan = () => {\n    if (scanIntervalRef.current) {\n      clearInterval(scanIntervalRef.current);\n    }\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    if (videoRef.current) {\n      videoRef.current.srcObject = null;\n    }\n    setIsScanning(false);\n  };\n  const handleScan = async qrContent => {\n    if (qrContent === lastScanned) {\n      return;\n    }\n    setLastScanned(qrContent);\n    try {\n      setScanError(null);\n      let qrData;\n      try {\n        qrData = JSON.parse(qrContent);\n        if (!qrData.id || !qrData.name || !qrData.email) {\n          throw new Error('Missing required fields in QR code');\n        }\n      } catch (e) {\n        setScanError(`Invalid QR code format: ${e.message}`);\n        return;\n      }\n      const response = await axios.post('http://localhost:5000/api/scan', {\n        qr_content: qrContent,\n        lab_name: labName\n      });\n      if (response.data.success) {\n        setScanResult(response.data);\n        playScanSound();\n        showSuccessMessage();\n      } else {\n        setScanError(response.data.message);\n      }\n    } catch (error) {\n      setScanError('Error scanning QR code: ' + error.message);\n    }\n  };\n  const handleManualScan = async () => {\n    if (!manualId.trim()) {\n      setScanError('Please enter a Person ID');\n      return;\n    }\n\n    // Validate it's a number\n    const idNumber = parseInt(manualId);\n    if (isNaN(idNumber) || idNumber <= 0) {\n      setScanError('Please enter a valid positive number for ID');\n      return;\n    }\n    try {\n      setScanError(null);\n\n      // Get all records to find the person by ID\n      const recordsResponse = await axios.get('http://localhost:5000/api/records');\n      const allRecords = recordsResponse.data;\n\n      // Find person by ID\n      const personRecord = allRecords.find(record => record.id === idNumber);\n      if (!personRecord) {\n        setScanError(`No person found with ID: ${manualId}`);\n        return;\n      }\n\n      // Create the QR data structure\n      const qrData = {\n        id: idNumber,\n        name: personRecord.name,\n        email: personRecord.email\n      };\n      const response = await axios.post('http://localhost:5000/api/scan', {\n        qr_content: JSON.stringify(qrData),\n        lab_name: labName\n      });\n      if (response.data.success) {\n        setScanResult(response.data);\n        setManualId(''); // Clear the input\n        playScanSound();\n        showSuccessMessage();\n      } else {\n        setScanError(response.data.message);\n      }\n    } catch (error) {\n      setScanError('Error: ' + error.message);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handleManualScan();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-qrcode\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }, this), \" QR Scanner\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this), showSuccessPopup && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"success-popup\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"popup-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-check-circle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Successfully Scanned!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Lab Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"form-control\",\n        value: labName,\n        onChange: e => setLabName(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Main Lab\",\n          children: \"Main Lab\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Chemistry Lab\",\n          children: \"Chemistry Lab\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Physics Lab\",\n          children: \"Physics Lab\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Biology Lab\",\n          children: \"Biology Lab\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Computer Lab\",\n          children: \"Computer Lab\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scanner-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-camera\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this), \" Camera Scanner\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this), cameraError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"scan-result scan-error\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\u274C Camera Issue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: cameraError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '10px',\n          marginBottom: '15px',\n          flexWrap: 'wrap'\n        },\n        children: !isScanning ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startCameraScan,\n          className: \"btn btn-primary\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-camera\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }, this), \" Start Camera Scanner\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: stopCameraScan,\n          className: \"btn btn-primary\",\n          style: {\n            backgroundColor: '#f44336'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-stop\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this), \" Stop Camera\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), isScanning && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"scanner-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          style: {\n            width: '100%',\n            maxWidth: '400px',\n            border: '3px solid #1e88e5',\n            borderRadius: '10px',\n            background: '#000'\n          },\n          playsInline: true,\n          muted: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          style: {\n            display: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            textAlign: 'center',\n            marginTop: '10px',\n            color: '#4caf50'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 15\n          }, this), \" Scanning for QR codes...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"manual-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-keyboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 13\n        }, this), \" Manual Entry\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Enter Person ID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          className: \"form-control\",\n          value: manualId,\n          onChange: e => setManualId(e.target.value),\n          onKeyPress: handleKeyPress,\n          placeholder: \"Enter ID number only\",\n          min: \"1\",\n          style: {\n            fontSize: '1.2rem',\n            fontWeight: 'bold',\n            textAlign: 'center',\n            padding: '15px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleManualScan,\n        className: \"btn btn-primary\",\n        style: {\n          width: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-sign-in-alt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this), \" SCAN BY ID\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '15px',\n          padding: '10px',\n          background: '#e8f5e8',\n          borderRadius: '5px',\n          border: '1px solid #4caf50'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: 0,\n            fontSize: '0.9rem',\n            color: '#2e7d32',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-lightbulb\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Tip:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 50\n          }, this), \" Find Person IDs in Dashboard\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this), scanResult && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scan-result scan-success\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u2705 Scan Successful!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Action:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 14\n        }, this), \" \", scanResult.action.toUpperCase()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 14\n        }, this), \" \", scanResult.person.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 14\n        }, this), \" \", scanResult.person.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Lab:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 14\n        }, this), \" \", scanResult.lab_name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Time:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 14\n        }, this), \" \", scanResult.timestamp]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setScanResult(null),\n        className: \"btn btn-primary\",\n        style: {\n          marginTop: '10px'\n        },\n        children: \"Scan Another\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 9\n    }, this), scanError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scan-result scan-error\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u274C Scan Failed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: scanError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setScanError(null),\n        className: \"btn btn-primary\",\n        style: {\n          marginTop: '10px'\n        },\n        children: \"Try Again\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 220,\n    columnNumber: 5\n  }, this);\n};\n_s(QRScanner, \"wUbMvWTmX7XZsCUt98YhYgbQbdA=\");\n_c = QRScanner;\nexport default QRScanner;\nvar _c;\n$RefreshReg$(_c, \"QRScanner\");","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","jsQR","jsxDEV","_jsxDEV","QRScanner","_s","scanResult","setScanResult","scanError","setScanError","manualId","setManualId","labName","setLabName","isScanning","setIsScanning","cameraError","setCameraError","lastScanned","setLastScanned","showSuccessPopup","setShowSuccessPopup","videoRef","canvasRef","streamRef","scanIntervalRef","audioRef","current","Audio","src","stopCameraScan","playScanSound","play","catch","e","console","log","error","showSuccessMessage","setTimeout","startCameraScan","stream","navigator","mediaDevices","getUserMedia","video","facingMode","width","ideal","height","srcObject","setAttribute","onloadedmetadata","then","startQRDetection","message","canvas","context","getContext","scanQR","readyState","HAVE_ENOUGH_DATA","videoWidth","videoHeight","drawImage","imageData","getImageData","code","data","handleScan","setInterval","clearInterval","getTracks","forEach","track","stop","qrContent","qrData","JSON","parse","id","name","email","Error","response","post","qr_content","lab_name","success","handleManualScan","trim","idNumber","parseInt","isNaN","recordsResponse","get","allRecords","personRecord","find","record","stringify","handleKeyPress","key","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","style","display","gap","marginBottom","flexWrap","onClick","backgroundColor","ref","maxWidth","border","borderRadius","background","playsInline","muted","textAlign","marginTop","color","type","onKeyPress","placeholder","min","fontSize","fontWeight","padding","margin","action","toUpperCase","person","timestamp","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/lab/frontend/src/components/QRScanner.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport jsQR from 'jsqr';\r\n\r\nconst QRScanner = () => {\r\n  const [scanResult, setScanResult] = useState(null);\r\n  const [scanError, setScanError] = useState(null);\r\n  const [manualId, setManualId] = useState('');\r\n  const [labName, setLabName] = useState('Main Lab');\r\n  const [isScanning, setIsScanning] = useState(false);\r\n  const [cameraError, setCameraError] = useState('');\r\n  const [lastScanned, setLastScanned] = useState('');\r\n  const [showSuccessPopup, setShowSuccessPopup] = useState(false);\r\n  \r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const streamRef = useRef(null);\r\n  const scanIntervalRef = useRef(null);\r\n  const audioRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    audioRef.current = new Audio();\r\n    audioRef.current.src = \"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==\";\r\n    \r\n    return () => {\r\n      stopCameraScan();\r\n    };\r\n  }, []);\r\n\r\n  const playScanSound = () => {\r\n    try {\r\n      if (audioRef.current) {\r\n        audioRef.current.play().catch(e => console.log('Audio play failed:', e));\r\n      }\r\n    } catch (error) {\r\n      console.log('Sound error:', error);\r\n    }\r\n  };\r\n\r\n  const showSuccessMessage = () => {\r\n    setShowSuccessPopup(true);\r\n    setTimeout(() => {\r\n      setShowSuccessPopup(false);\r\n    }, 3000);\r\n  };\r\n\r\n  const startCameraScan = async () => {\r\n    try {\r\n      setCameraError('');\r\n      setScanError('');\r\n      setScanResult(null);\r\n      setIsScanning(true);\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: { \r\n          facingMode: \"environment\",\r\n          width: { ideal: 1280 },\r\n          height: { ideal: 720 }\r\n        } \r\n      });\r\n\r\n      streamRef.current = stream;\r\n      \r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        videoRef.current.setAttribute(\"playsinline\", true);\r\n        \r\n        videoRef.current.onloadedmetadata = () => {\r\n          videoRef.current.play().then(() => {\r\n            startQRDetection();\r\n          });\r\n        };\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Camera error:', error);\r\n      setCameraError(`Camera Error: ${error.message}`);\r\n      setIsScanning(false);\r\n    }\r\n  };\r\n\r\n  const startQRDetection = () => {\r\n    const video = videoRef.current;\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext('2d');\r\n\r\n    const scanQR = () => {\r\n      if (video.readyState === video.HAVE_ENOUGH_DATA) {\r\n        canvas.width = video.videoWidth;\r\n        canvas.height = video.videoHeight;\r\n        \r\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\r\n        const code = jsQR(imageData.data, imageData.width, imageData.height);\r\n        \r\n        if (code) {\r\n          console.log('QR Code detected:', code.data);\r\n          handleScan(code.data);\r\n        }\r\n      }\r\n    };\r\n\r\n    scanIntervalRef.current = setInterval(scanQR, 500);\r\n  };\r\n\r\n  const stopCameraScan = () => {\r\n    if (scanIntervalRef.current) {\r\n      clearInterval(scanIntervalRef.current);\r\n    }\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach(track => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n    if (videoRef.current) {\r\n      videoRef.current.srcObject = null;\r\n    }\r\n    setIsScanning(false);\r\n  };\r\n\r\n  const handleScan = async (qrContent) => {\r\n    if (qrContent === lastScanned) {\r\n      return;\r\n    }\r\n    setLastScanned(qrContent);\r\n    \r\n    try {\r\n      setScanError(null);\r\n      \r\n      let qrData;\r\n      try {\r\n        qrData = JSON.parse(qrContent);\r\n        \r\n        if (!qrData.id || !qrData.name || !qrData.email) {\r\n          throw new Error('Missing required fields in QR code');\r\n        }\r\n      } catch (e) {\r\n        setScanError(`Invalid QR code format: ${e.message}`);\r\n        return;\r\n      }\r\n\r\n      const response = await axios.post('http://localhost:5000/api/scan', {\r\n        qr_content: qrContent,\r\n        lab_name: labName\r\n      });\r\n      \r\n      if (response.data.success) {\r\n        setScanResult(response.data);\r\n        playScanSound();\r\n        showSuccessMessage();\r\n      } else {\r\n        setScanError(response.data.message);\r\n      }\r\n    } catch (error) {\r\n      setScanError('Error scanning QR code: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const handleManualScan = async () => {\r\n    if (!manualId.trim()) {\r\n      setScanError('Please enter a Person ID');\r\n      return;\r\n    }\r\n\r\n    // Validate it's a number\r\n    const idNumber = parseInt(manualId);\r\n    if (isNaN(idNumber) || idNumber <= 0) {\r\n      setScanError('Please enter a valid positive number for ID');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setScanError(null);\r\n      \r\n      // Get all records to find the person by ID\r\n      const recordsResponse = await axios.get('http://localhost:5000/api/records');\r\n      const allRecords = recordsResponse.data;\r\n      \r\n      // Find person by ID\r\n      const personRecord = allRecords.find(record => \r\n        record.id === idNumber\r\n      );\r\n\r\n      if (!personRecord) {\r\n        setScanError(`No person found with ID: ${manualId}`);\r\n        return;\r\n      }\r\n\r\n      // Create the QR data structure\r\n      const qrData = {\r\n        id: idNumber,\r\n        name: personRecord.name,\r\n        email: personRecord.email\r\n      };\r\n\r\n      const response = await axios.post('http://localhost:5000/api/scan', {\r\n        qr_content: JSON.stringify(qrData),\r\n        lab_name: labName\r\n      });\r\n      \r\n      if (response.data.success) {\r\n        setScanResult(response.data);\r\n        setManualId(''); // Clear the input\r\n        playScanSound();\r\n        showSuccessMessage();\r\n      } else {\r\n        setScanError(response.data.message);\r\n      }\r\n    } catch (error) {\r\n      setScanError('Error: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleManualScan();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <h2><i className=\"fas fa-qrcode\"></i> QR Scanner</h2>\r\n      \r\n      {/* Success Popup */}\r\n      {showSuccessPopup && (\r\n        <div className=\"success-popup\">\r\n          <div className=\"popup-content\">\r\n            <i className=\"fas fa-check-circle\"></i>\r\n            <span>Successfully Scanned!</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"form-group\">\r\n        <label>Lab Name</label>\r\n        <select className=\"form-control\" value={labName} onChange={(e) => setLabName(e.target.value)}>\r\n          <option value=\"Main Lab\">Main Lab</option>\r\n          <option value=\"Chemistry Lab\">Chemistry Lab</option>\r\n          <option value=\"Physics Lab\">Physics Lab</option>\r\n          <option value=\"Biology Lab\">Biology Lab</option>\r\n          <option value=\"Computer Lab\">Computer Lab</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Camera Scanner Section */}\r\n      <div className=\"scanner-section\">\r\n        <h3><i className=\"fas fa-camera\"></i> Camera Scanner</h3>\r\n        \r\n        {cameraError && (\r\n          <div className=\"scan-result scan-error\">\r\n            <h4>❌ Camera Issue</h4>\r\n            <p>{cameraError}</p>\r\n          </div>\r\n        )}\r\n\r\n        <div style={{ display: 'flex', gap: '10px', marginBottom: '15px', flexWrap: 'wrap' }}>\r\n          {!isScanning ? (\r\n            <button onClick={startCameraScan} className=\"btn btn-primary\">\r\n              <i className=\"fas fa-camera\"></i> Start Camera Scanner\r\n            </button>\r\n          ) : (\r\n            <button onClick={stopCameraScan} className=\"btn btn-primary\" style={{backgroundColor: '#f44336'}}>\r\n              <i className=\"fas fa-stop\"></i> Stop Camera\r\n            </button>\r\n          )}\r\n        </div>\r\n        \r\n        {isScanning && (\r\n          <div className=\"scanner-container\">\r\n            <video \r\n              ref={videoRef} \r\n              style={{ \r\n                width: '100%', \r\n                maxWidth: '400px', \r\n                border: '3px solid #1e88e5', \r\n                borderRadius: '10px',\r\n                background: '#000'\r\n              }}\r\n              playsInline\r\n              muted\r\n            />\r\n            <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n            <p style={{textAlign: 'center', marginTop: '10px', color: '#4caf50'}}>\r\n              <i className=\"fas fa-search\"></i> Scanning for QR codes...\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Manual Input Section - ID ONLY */}\r\n      <div className=\"manual-section\">\r\n        <h3><i className=\"fas fa-keyboard\"></i> Manual Entry</h3>\r\n        \r\n        <div className=\"form-group\">\r\n          <label>Enter Person ID</label>\r\n          <input\r\n            type=\"number\"\r\n            className=\"form-control\"\r\n            value={manualId}\r\n            onChange={(e) => setManualId(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n            placeholder=\"Enter ID number only\"\r\n            min=\"1\"\r\n            style={{ \r\n              fontSize: '1.2rem', \r\n              fontWeight: 'bold', \r\n              textAlign: 'center',\r\n              padding: '15px'\r\n            }}\r\n          />\r\n        </div>\r\n        \r\n        <button onClick={handleManualScan} className=\"btn btn-primary\" style={{width: '100%'}}>\r\n          <i className=\"fas fa-sign-in-alt\"></i> SCAN BY ID\r\n        </button>\r\n\r\n        <div style={{ marginTop: '15px', padding: '10px', background: '#e8f5e8', borderRadius: '5px', border: '1px solid #4caf50' }}>\r\n          <p style={{ margin: 0, fontSize: '0.9rem', color: '#2e7d32', textAlign: 'center' }}>\r\n            <i className=\"fas fa-lightbulb\"></i> <strong>Tip:</strong> Find Person IDs in Dashboard\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Scan Results */}\r\n      {scanResult && (\r\n        <div className=\"scan-result scan-success\">\r\n          <h3>✅ Scan Successful!</h3>\r\n          <p><strong>Action:</strong> {scanResult.action.toUpperCase()}</p>\r\n          <p><strong>Name:</strong> {scanResult.person.name}</p>\r\n          <p><strong>Email:</strong> {scanResult.person.email}</p>\r\n          <p><strong>Lab:</strong> {scanResult.lab_name}</p>\r\n          <p><strong>Time:</strong> {scanResult.timestamp}</p>\r\n          <button \r\n            onClick={() => setScanResult(null)} \r\n            className=\"btn btn-primary\"\r\n            style={{marginTop: '10px'}}\r\n          >\r\n            Scan Another\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {scanError && (\r\n        <div className=\"scan-result scan-error\">\r\n          <h3>❌ Scan Failed</h3>\r\n          <p>{scanError}</p>\r\n          <button \r\n            onClick={() => setScanError(null)} \r\n            className=\"btn btn-primary\"\r\n            style={{marginTop: '10px'}}\r\n          >\r\n            Try Again\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QRScanner;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}