{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\lab\\\\frontend\\\\src\\\\components\\\\QRScanner.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport axios from 'axios';\nimport jsQR from 'jsqr';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst QRScanner = () => {\n  _s();\n  const [scanResult, setScanResult] = useState(null);\n  const [scanError, setScanError] = useState(null);\n  const [manualId, setManualId] = useState('');\n  const [labName, setLabName] = useState('Main Lab');\n  const [isScanning, setIsScanning] = useState(false);\n  const [cameraError, setCameraError] = useState('');\n  const [lastScanned, setLastScanned] = useState('');\n  const [showSuccessPopup, setShowSuccessPopup] = useState(false);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const streamRef = useRef(null);\n  const scanIntervalRef = useRef(null);\n  const audioRef = useRef(null);\n  useEffect(() => {\n    audioRef.current = new Audio();\n    audioRef.current.src = \"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==\";\n    return () => {\n      stopCameraScan();\n    };\n  }, []);\n  const playScanSound = () => {\n    try {\n      if (audioRef.current) {\n        audioRef.current.play().catch(e => console.log('Audio play failed:', e));\n      }\n    } catch (error) {\n      console.log('Sound error:', error);\n    }\n  };\n  const showSuccessMessage = () => {\n    setShowSuccessPopup(true);\n    setTimeout(() => {\n      setShowSuccessPopup(false);\n    }, 3000);\n  };\n  const startCameraScan = async () => {\n    try {\n      setCameraError('');\n      setScanError('');\n      setScanResult(null);\n      setIsScanning(true);\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: \"environment\",\n          width: {\n            ideal: 1280\n          },\n          height: {\n            ideal: 720\n          }\n        }\n      });\n      streamRef.current = stream;\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        videoRef.current.setAttribute(\"playsinline\", true);\n        videoRef.current.onloadedmetadata = () => {\n          videoRef.current.play().then(() => {\n            startQRDetection();\n          });\n        };\n      }\n    } catch (error) {\n      console.error('Camera error:', error);\n      setCameraError(`Camera Error: ${error.message}`);\n      setIsScanning(false);\n    }\n  };\n  const startQRDetection = () => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    const scanQR = () => {\n      if (video.readyState === video.HAVE_ENOUGH_DATA) {\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\n        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n        const code = jsQR(imageData.data, imageData.width, imageData.height);\n        if (code) {\n          console.log('QR Code detected:', code.data);\n          handleScan(code.data);\n        }\n      }\n    };\n    scanIntervalRef.current = setInterval(scanQR, 500);\n  };\n  const stopCameraScan = () => {\n    if (scanIntervalRef.current) {\n      clearInterval(scanIntervalRef.current);\n    }\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    if (videoRef.current) {\n      videoRef.current.srcObject = null;\n    }\n    setIsScanning(false);\n  };\n  const handleScan = async qrContent => {\n    if (qrContent === lastScanned) {\n      return;\n    }\n    setLastScanned(qrContent);\n    try {\n      setScanError(null);\n      let qrData;\n      try {\n        qrData = JSON.parse(qrContent);\n        if (!qrData.id || !qrData.name || !qrData.email) {\n          throw new Error('Missing required fields in QR code');\n        }\n      } catch (e) {\n        setScanError(`Invalid QR code format: ${e.message}`);\n        return;\n      }\n      const response = await axios.post('http://localhost:5000/api/scan', {\n        qr_content: qrContent,\n        lab_name: labName\n      });\n      if (response.data.success) {\n        setScanResult(response.data);\n        playScanSound();\n        showSuccessMessage();\n      } else {\n        setScanError(response.data.message);\n      }\n    } catch (error) {\n      setScanError('Error scanning QR code: ' + error.message);\n    }\n  };\n  const handleManualScan = async () => {\n    if (!manualId.trim()) {\n      setScanError('Please enter a Person ID');\n      return;\n    }\n\n    // Validate it's a number\n    const idNumber = parseInt(manualId);\n    if (isNaN(idNumber) || idNumber <= 0) {\n      setScanError('Please enter a valid positive number for ID');\n      return;\n    }\n    try {\n      setScanError(null);\n      console.log('Looking for person with ID:', idNumber);\n\n      // Use the new API endpoint to get person by ID\n      const response = await axios.get(`http://localhost:5000/api/person/${idNumber}`);\n      console.log('Person API response:', response.data);\n      if (response.data.success) {\n        const person = response.data.person;\n\n        // Create the QR data structure\n        const qrData = {\n          id: person.id,\n          name: person.name,\n          email: person.email\n        };\n        console.log('Sending scan request with data:', qrData);\n\n        // Now scan this person\n        const scanResponse = await axios.post('http://localhost:5000/api/scan', {\n          qr_content: JSON.stringify(qrData),\n          lab_name: labName\n        });\n        console.log('Scan response:', scanResponse.data);\n        if (scanResponse.data.success) {\n          setScanResult(scanResponse.data);\n          setManualId(''); // Clear the input\n          playScanSound();\n          showSuccessMessage();\n        } else {\n          setScanError(scanResponse.data.message);\n        }\n      } else {\n        setScanError(response.data.message);\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Manual scan error:', error);\n      setScanError('Error: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message));\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handleManualScan();\n    }\n  };\n\n  // Test function to check all registered persons\n  const testAllPersons = async () => {\n    try {\n      const recordsResponse = await axios.get('http://localhost:5000/api/records');\n      const allRecords = recordsResponse.data;\n\n      // Get unique person IDs from records\n      const uniquePersonIds = [...new Set(allRecords.map(record => record.id))];\n      console.log('Found person IDs in records:', uniquePersonIds);\n      if (uniquePersonIds.length === 0) {\n        alert('No persons found in records. Please register someone first.');\n        return;\n      }\n      alert(`Found ${uniquePersonIds.length} person(s) in system:\\n${uniquePersonIds.join(', ')}`);\n    } catch (error) {\n      console.error('Test error:', error);\n      alert('Error fetching persons: ' + error.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-qrcode\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }, this), \" QR Scanner\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this), showSuccessPopup && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"success-popup\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"popup-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-check-circle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Successfully Scanned!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Lab Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"form-control\",\n        value: labName,\n        onChange: e => setLabName(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Main Lab\",\n          children: \"Main Lab\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Chemistry Lab\",\n          children: \"Chemistry Lab\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Physics Lab\",\n          children: \"Physics Lab\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Biology Lab\",\n          children: \"Biology Lab\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Computer Lab\",\n          children: \"Computer Lab\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scanner-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-camera\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 13\n        }, this), \" Camera Scanner\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), cameraError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"scan-result scan-error\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\u274C Camera Issue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: cameraError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '10px',\n          marginBottom: '15px',\n          flexWrap: 'wrap'\n        },\n        children: [!isScanning ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startCameraScan,\n          className: \"btn btn-primary\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-camera\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 15\n          }, this), \" Start Camera Scanner\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: stopCameraScan,\n          className: \"btn btn-primary\",\n          style: {\n            backgroundColor: '#f44336'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-stop\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 15\n          }, this), \" Stop Camera\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: testAllPersons,\n          className: \"btn btn-primary\",\n          style: {\n            backgroundColor: '#9c27b0'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-list\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this), \" Check All IDs\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), isScanning && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"scanner-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          style: {\n            width: '100%',\n            maxWidth: '400px',\n            border: '3px solid #1e88e5',\n            borderRadius: '10px',\n            background: '#000'\n          },\n          playsInline: true,\n          muted: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          style: {\n            display: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            textAlign: 'center',\n            marginTop: '10px',\n            color: '#4caf50'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this), \" Scanning for QR codes...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"manual-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-keyboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 13\n        }, this), \" Manual Entry\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Enter Person ID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          className: \"form-control\",\n          value: manualId,\n          onChange: e => setManualId(e.target.value),\n          onKeyPress: handleKeyPress,\n          placeholder: \"Enter ID number only\",\n          min: \"1\",\n          style: {\n            fontSize: '1.2rem',\n            fontWeight: 'bold',\n            textAlign: 'center',\n            padding: '15px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleManualScan,\n        className: \"btn btn-primary\",\n        style: {\n          width: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-sign-in-alt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this), \" SCAN BY ID\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '15px',\n          padding: '10px',\n          background: '#e8f5e8',\n          borderRadius: '5px',\n          border: '1px solid #4caf50'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: 0,\n            fontSize: '0.9rem',\n            color: '#2e7d32',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-lightbulb\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Find IDs:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 50\n          }, this), \" Check \\\"Saved Persons\\\" in Dashboard\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }, this), scanResult && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scan-result scan-success\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u2705 Scan Successful!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Action:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 14\n        }, this), \" \", scanResult.action.toUpperCase()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 14\n        }, this), \" \", scanResult.person.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 14\n        }, this), \" \", scanResult.person.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Lab:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 14\n        }, this), \" \", scanResult.lab_name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Time:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 14\n        }, this), \" \", scanResult.timestamp]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setScanResult(null),\n        className: \"btn btn-primary\",\n        style: {\n          marginTop: '10px'\n        },\n        children: \"Scan Another\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 9\n    }, this), scanError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scan-result scan-error\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u274C Scan Failed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: scanError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setScanError(null),\n        className: \"btn btn-primary\",\n        style: {\n          marginTop: '10px'\n        },\n        children: \"Try Again\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 247,\n    columnNumber: 5\n  }, this);\n};\n_s(QRScanner, \"wUbMvWTmX7XZsCUt98YhYgbQbdA=\");\n_c = QRScanner;\nexport default QRScanner;\nvar _c;\n$RefreshReg$(_c, \"QRScanner\");","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","jsQR","jsxDEV","_jsxDEV","QRScanner","_s","scanResult","setScanResult","scanError","setScanError","manualId","setManualId","labName","setLabName","isScanning","setIsScanning","cameraError","setCameraError","lastScanned","setLastScanned","showSuccessPopup","setShowSuccessPopup","videoRef","canvasRef","streamRef","scanIntervalRef","audioRef","current","Audio","src","stopCameraScan","playScanSound","play","catch","e","console","log","error","showSuccessMessage","setTimeout","startCameraScan","stream","navigator","mediaDevices","getUserMedia","video","facingMode","width","ideal","height","srcObject","setAttribute","onloadedmetadata","then","startQRDetection","message","canvas","context","getContext","scanQR","readyState","HAVE_ENOUGH_DATA","videoWidth","videoHeight","drawImage","imageData","getImageData","code","data","handleScan","setInterval","clearInterval","getTracks","forEach","track","stop","qrContent","qrData","JSON","parse","id","name","email","Error","response","post","qr_content","lab_name","success","handleManualScan","trim","idNumber","parseInt","isNaN","get","person","scanResponse","stringify","_error$response","_error$response$data","handleKeyPress","key","testAllPersons","recordsResponse","allRecords","uniquePersonIds","Set","map","record","length","alert","join","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","style","display","gap","marginBottom","flexWrap","onClick","backgroundColor","ref","maxWidth","border","borderRadius","background","playsInline","muted","textAlign","marginTop","color","type","onKeyPress","placeholder","min","fontSize","fontWeight","padding","margin","action","toUpperCase","timestamp","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/lab/frontend/src/components/QRScanner.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport jsQR from 'jsqr';\r\n\r\nconst QRScanner = () => {\r\n  const [scanResult, setScanResult] = useState(null);\r\n  const [scanError, setScanError] = useState(null);\r\n  const [manualId, setManualId] = useState('');\r\n  const [labName, setLabName] = useState('Main Lab');\r\n  const [isScanning, setIsScanning] = useState(false);\r\n  const [cameraError, setCameraError] = useState('');\r\n  const [lastScanned, setLastScanned] = useState('');\r\n  const [showSuccessPopup, setShowSuccessPopup] = useState(false);\r\n  \r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const streamRef = useRef(null);\r\n  const scanIntervalRef = useRef(null);\r\n  const audioRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    audioRef.current = new Audio();\r\n    audioRef.current.src = \"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==\";\r\n    \r\n    return () => {\r\n      stopCameraScan();\r\n    };\r\n  }, []);\r\n\r\n  const playScanSound = () => {\r\n    try {\r\n      if (audioRef.current) {\r\n        audioRef.current.play().catch(e => console.log('Audio play failed:', e));\r\n      }\r\n    } catch (error) {\r\n      console.log('Sound error:', error);\r\n    }\r\n  };\r\n\r\n  const showSuccessMessage = () => {\r\n    setShowSuccessPopup(true);\r\n    setTimeout(() => {\r\n      setShowSuccessPopup(false);\r\n    }, 3000);\r\n  };\r\n\r\n  const startCameraScan = async () => {\r\n    try {\r\n      setCameraError('');\r\n      setScanError('');\r\n      setScanResult(null);\r\n      setIsScanning(true);\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: { \r\n          facingMode: \"environment\",\r\n          width: { ideal: 1280 },\r\n          height: { ideal: 720 }\r\n        } \r\n      });\r\n\r\n      streamRef.current = stream;\r\n      \r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        videoRef.current.setAttribute(\"playsinline\", true);\r\n        \r\n        videoRef.current.onloadedmetadata = () => {\r\n          videoRef.current.play().then(() => {\r\n            startQRDetection();\r\n          });\r\n        };\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Camera error:', error);\r\n      setCameraError(`Camera Error: ${error.message}`);\r\n      setIsScanning(false);\r\n    }\r\n  };\r\n\r\n  const startQRDetection = () => {\r\n    const video = videoRef.current;\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext('2d');\r\n\r\n    const scanQR = () => {\r\n      if (video.readyState === video.HAVE_ENOUGH_DATA) {\r\n        canvas.width = video.videoWidth;\r\n        canvas.height = video.videoHeight;\r\n        \r\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\r\n        const code = jsQR(imageData.data, imageData.width, imageData.height);\r\n        \r\n        if (code) {\r\n          console.log('QR Code detected:', code.data);\r\n          handleScan(code.data);\r\n        }\r\n      }\r\n    };\r\n\r\n    scanIntervalRef.current = setInterval(scanQR, 500);\r\n  };\r\n\r\n  const stopCameraScan = () => {\r\n    if (scanIntervalRef.current) {\r\n      clearInterval(scanIntervalRef.current);\r\n    }\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach(track => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n    if (videoRef.current) {\r\n      videoRef.current.srcObject = null;\r\n    }\r\n    setIsScanning(false);\r\n  };\r\n\r\n  const handleScan = async (qrContent) => {\r\n    if (qrContent === lastScanned) {\r\n      return;\r\n    }\r\n    setLastScanned(qrContent);\r\n    \r\n    try {\r\n      setScanError(null);\r\n      \r\n      let qrData;\r\n      try {\r\n        qrData = JSON.parse(qrContent);\r\n        \r\n        if (!qrData.id || !qrData.name || !qrData.email) {\r\n          throw new Error('Missing required fields in QR code');\r\n        }\r\n      } catch (e) {\r\n        setScanError(`Invalid QR code format: ${e.message}`);\r\n        return;\r\n      }\r\n\r\n      const response = await axios.post('http://localhost:5000/api/scan', {\r\n        qr_content: qrContent,\r\n        lab_name: labName\r\n      });\r\n      \r\n      if (response.data.success) {\r\n        setScanResult(response.data);\r\n        playScanSound();\r\n        showSuccessMessage();\r\n      } else {\r\n        setScanError(response.data.message);\r\n      }\r\n    } catch (error) {\r\n      setScanError('Error scanning QR code: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const handleManualScan = async () => {\r\n    if (!manualId.trim()) {\r\n      setScanError('Please enter a Person ID');\r\n      return;\r\n    }\r\n\r\n    // Validate it's a number\r\n    const idNumber = parseInt(manualId);\r\n    if (isNaN(idNumber) || idNumber <= 0) {\r\n      setScanError('Please enter a valid positive number for ID');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setScanError(null);\r\n      \r\n      console.log('Looking for person with ID:', idNumber);\r\n      \r\n      // Use the new API endpoint to get person by ID\r\n      const response = await axios.get(`http://localhost:5000/api/person/${idNumber}`);\r\n      console.log('Person API response:', response.data);\r\n      \r\n      if (response.data.success) {\r\n        const person = response.data.person;\r\n        \r\n        // Create the QR data structure\r\n        const qrData = {\r\n          id: person.id,\r\n          name: person.name,\r\n          email: person.email\r\n        };\r\n\r\n        console.log('Sending scan request with data:', qrData);\r\n\r\n        // Now scan this person\r\n        const scanResponse = await axios.post('http://localhost:5000/api/scan', {\r\n          qr_content: JSON.stringify(qrData),\r\n          lab_name: labName\r\n        });\r\n        \r\n        console.log('Scan response:', scanResponse.data);\r\n        \r\n        if (scanResponse.data.success) {\r\n          setScanResult(scanResponse.data);\r\n          setManualId(''); // Clear the input\r\n          playScanSound();\r\n          showSuccessMessage();\r\n        } else {\r\n          setScanError(scanResponse.data.message);\r\n        }\r\n      } else {\r\n        setScanError(response.data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Manual scan error:', error);\r\n      setScanError('Error: ' + (error.response?.data?.message || error.message));\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleManualScan();\r\n    }\r\n  };\r\n\r\n  // Test function to check all registered persons\r\n  const testAllPersons = async () => {\r\n    try {\r\n      const recordsResponse = await axios.get('http://localhost:5000/api/records');\r\n      const allRecords = recordsResponse.data;\r\n      \r\n      // Get unique person IDs from records\r\n      const uniquePersonIds = [...new Set(allRecords.map(record => record.id))];\r\n      console.log('Found person IDs in records:', uniquePersonIds);\r\n      \r\n      if (uniquePersonIds.length === 0) {\r\n        alert('No persons found in records. Please register someone first.');\r\n        return;\r\n      }\r\n      \r\n      alert(`Found ${uniquePersonIds.length} person(s) in system:\\n${uniquePersonIds.join(', ')}`);\r\n      \r\n    } catch (error) {\r\n      console.error('Test error:', error);\r\n      alert('Error fetching persons: ' + error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <h2><i className=\"fas fa-qrcode\"></i> QR Scanner</h2>\r\n      \r\n      {/* Success Popup */}\r\n      {showSuccessPopup && (\r\n        <div className=\"success-popup\">\r\n          <div className=\"popup-content\">\r\n            <i className=\"fas fa-check-circle\"></i>\r\n            <span>Successfully Scanned!</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"form-group\">\r\n        <label>Lab Name</label>\r\n        <select className=\"form-control\" value={labName} onChange={(e) => setLabName(e.target.value)}>\r\n          <option value=\"Main Lab\">Main Lab</option>\r\n          <option value=\"Chemistry Lab\">Chemistry Lab</option>\r\n          <option value=\"Physics Lab\">Physics Lab</option>\r\n          <option value=\"Biology Lab\">Biology Lab</option>\r\n          <option value=\"Computer Lab\">Computer Lab</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Camera Scanner Section */}\r\n      <div className=\"scanner-section\">\r\n        <h3><i className=\"fas fa-camera\"></i> Camera Scanner</h3>\r\n        \r\n        {cameraError && (\r\n          <div className=\"scan-result scan-error\">\r\n            <h4>❌ Camera Issue</h4>\r\n            <p>{cameraError}</p>\r\n          </div>\r\n        )}\r\n\r\n        <div style={{ display: 'flex', gap: '10px', marginBottom: '15px', flexWrap: 'wrap' }}>\r\n          {!isScanning ? (\r\n            <button onClick={startCameraScan} className=\"btn btn-primary\">\r\n              <i className=\"fas fa-camera\"></i> Start Camera Scanner\r\n            </button>\r\n          ) : (\r\n            <button onClick={stopCameraScan} className=\"btn btn-primary\" style={{backgroundColor: '#f44336'}}>\r\n              <i className=\"fas fa-stop\"></i> Stop Camera\r\n            </button>\r\n          )}\r\n          \r\n          <button onClick={testAllPersons} className=\"btn btn-primary\" style={{backgroundColor: '#9c27b0'}}>\r\n            <i className=\"fas fa-list\"></i> Check All IDs\r\n          </button>\r\n        </div>\r\n        \r\n        {isScanning && (\r\n          <div className=\"scanner-container\">\r\n            <video \r\n              ref={videoRef} \r\n              style={{ \r\n                width: '100%', \r\n                maxWidth: '400px', \r\n                border: '3px solid #1e88e5', \r\n                borderRadius: '10px',\r\n                background: '#000'\r\n              }}\r\n              playsInline\r\n              muted\r\n            />\r\n            <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n            <p style={{textAlign: 'center', marginTop: '10px', color: '#4caf50'}}>\r\n              <i className=\"fas fa-search\"></i> Scanning for QR codes...\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Manual Input Section - ID ONLY */}\r\n      <div className=\"manual-section\">\r\n        <h3><i className=\"fas fa-keyboard\"></i> Manual Entry</h3>\r\n        \r\n        <div className=\"form-group\">\r\n          <label>Enter Person ID</label>\r\n          <input\r\n            type=\"number\"\r\n            className=\"form-control\"\r\n            value={manualId}\r\n            onChange={(e) => setManualId(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n            placeholder=\"Enter ID number only\"\r\n            min=\"1\"\r\n            style={{ \r\n              fontSize: '1.2rem', \r\n              fontWeight: 'bold', \r\n              textAlign: 'center',\r\n              padding: '15px'\r\n            }}\r\n          />\r\n        </div>\r\n        \r\n        <button onClick={handleManualScan} className=\"btn btn-primary\" style={{width: '100%'}}>\r\n          <i className=\"fas fa-sign-in-alt\"></i> SCAN BY ID\r\n        </button>\r\n\r\n        <div style={{ marginTop: '15px', padding: '10px', background: '#e8f5e8', borderRadius: '5px', border: '1px solid #4caf50' }}>\r\n          <p style={{ margin: 0, fontSize: '0.9rem', color: '#2e7d32', textAlign: 'center' }}>\r\n            <i className=\"fas fa-lightbulb\"></i> <strong>Find IDs:</strong> Check \"Saved Persons\" in Dashboard\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Scan Results */}\r\n      {scanResult && (\r\n        <div className=\"scan-result scan-success\">\r\n          <h3>✅ Scan Successful!</h3>\r\n          <p><strong>Action:</strong> {scanResult.action.toUpperCase()}</p>\r\n          <p><strong>Name:</strong> {scanResult.person.name}</p>\r\n          <p><strong>Email:</strong> {scanResult.person.email}</p>\r\n          <p><strong>Lab:</strong> {scanResult.lab_name}</p>\r\n          <p><strong>Time:</strong> {scanResult.timestamp}</p>\r\n          <button \r\n            onClick={() => setScanResult(null)} \r\n            className=\"btn btn-primary\"\r\n            style={{marginTop: '10px'}}\r\n          >\r\n            Scan Another\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {scanError && (\r\n        <div className=\"scan-result scan-error\">\r\n          <h3>❌ Scan Failed</h3>\r\n          <p>{scanError}</p>\r\n          <button \r\n            onClick={() => setScanError(null)} \r\n            className=\"btn btn-primary\"\r\n            style={{marginTop: '10px'}}\r\n          >\r\n            Try Again\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QRScanner;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}